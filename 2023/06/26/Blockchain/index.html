

<!DOCTYPE html>
<html lang="en" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="https://raw.githubusercontent.com/CHEN-Ziyang-Rocky/Image/main/IMG_4487.jpg">
  <link rel="icon" href="https://raw.githubusercontent.com/CHEN-Ziyang-Rocky/Image/main/IMG_4487.jpg">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Rocky CHEN">
  <meta name="keywords" content="">
  
    <meta name="description" content="Made by Ziyang CHEN, Rocky, 陈子阳  A blockchain is a chain of blocks that contains information. intended to timestamp digital documents so that it’s not possible to backdate them or to tamper with them.">
<meta property="og:type" content="article">
<meta property="og:title" content="Blockchain">
<meta property="og:url" content="http://example.com/2023/06/26/Blockchain/index.html">
<meta property="og:site_name" content="Rocky Web">
<meta property="og:description" content="Made by Ziyang CHEN, Rocky, 陈子阳  A blockchain is a chain of blocks that contains information. intended to timestamp digital documents so that it’s not possible to backdate them or to tamper with them.">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://raw.githubusercontent.com/CHEN-Ziyang-Rocky/Image/main/Screenshot%202023-01-17%20at%2014.43.36.png">
<meta property="article:published_time" content="2023-06-26T08:02:00.000Z">
<meta property="article:modified_time" content="2023-07-23T06:12:57.353Z">
<meta property="article:author" content="Rocky CHEN">
<meta property="article:tag" content="Web3.0">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://raw.githubusercontent.com/CHEN-Ziyang-Rocky/Image/main/Screenshot%202023-01-17%20at%2014.43.36.png">
  
  
    <meta name="referrer" content="no-referrer-when-downgrade">
  
  
  <title>Blockchain - Rocky Web</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.9.5","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 6.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Rocky Blog</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                <span>主页 | Home</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                <span>档案 | Archive</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                <span>分类 | Category</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                <span>标签 | Tag</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                <span>关于 | About</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/">
                <i class="iconfont icon-friends"></i>
                <span>伙伴 | Friends</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('https://raw.githubusercontent.com/CHEN-Ziyang-Rocky/Image/main/Screenshot%202023-01-17%20at%2014.43.36.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="Blockchain"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2023-06-26 16:02" pubdate>
          Monday, June 26th 2023, 4:02 pm
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          <!-- compatible with older versions-->
          6.2k words
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          52 mins
        
      </span>
    

    
    
      
        <span id="busuanzi_container_page_pv" style="display: none">
          <i class="iconfont icon-eye" aria-hidden="true"></i>
          <span id="busuanzi_value_page_pv"></span> times
        </span>
        
      
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">Blockchain</h1>
            
            
              <div class="markdown-body">
                
                <p><em><strong>Made by Ziyang CHEN, Rocky, 陈子阳</strong></em></p>
<hr>
<p>A blockchain is a chain of blocks that contains information.</p>
<p>intended to timestamp digital documents so that it’s not possible to backdate them or to tamper with them.</p>
<p>旨在为数字文件打上时间戳，使其无法追溯或篡改。</p>
<p>A blockchain is a distributed ledger that is completely open to anyone.</p>
<p>区块链是一个分布式账本，它对任何人完全开放。</p>
<ul>
<li><p><strong>Data:</strong> store the details about a transaction</p>
</li>
<li><p><strong>Hash:</strong> </p>
<ul>
<li>fingerprint, identifies a block &amp; content, unique; </li>
<li>Once a block is created, hash is being calculated; </li>
<li>Changing sth. in block, hash will change</li>
</ul>
</li>
<li><p><strong>Hash of the previous block:</strong> </p>
</li>
<li><p><strong>Proof-of-work:</strong> mitigate super computer could effectively tamper with a block and recalculate all the hashes of other blocks</p>
<ul>
<li>a mechanism that slows down the creation of new blocks.</li>
<li>Bitcoins case: 10 minutes to calculate the required proof-of-work and add a new block to the chain.</li>
<li>if temper - need to recalculate the proof-of-work for all the following blocks.</li>
</ul>
</li>
</ul>
<p>区块链还有一种 secure themselves 的方式那就是 distributed. Instead of using a central entity to manage the chain, blockchains use a peer-to-peer network and anyone is allowed to join. When someone joins this network, he gets the full copy of the blockchain. The node can use this to verify that everything is still in order.</p>
<p>Adding a new block: That new block is send to everyone on the network. Each node then verifies the block to make sure that it hasn’t been tampered with. If everything checks out, each node adds this block to their own blockchain.</p>
<p>All the nodes in this network create consensus.</p>
<p><img src="https://raw.githubusercontent.com/CHEN-Ziyang-Rocky/Image/main/Screenshot%202023-01-17%20at%2014.43.36.png" srcset="/img/loading.gif" lazyload></p>
<p>比特币每10分钟会产生一个新的区块，这个新的区块里记录了这10分钟里的所有交易，这些交易就是人们每时每刻在进行比特币的转账交易，每个区块的容量是 1MB，由于每个区块的容量较小，所以以前有时并不能记录所有的交易，并且造成比特币拥堵。</p>
<p>现在的解决办法就是 hard fork，分叉&#x2F; 建立的一条新链：Bitcoin cash BCH。 所以现在比特币就是有新老两条链，旧的链和新的链没有任何关系，也不能互通。</p>
<h3 id="共识机制-consensus-x2F-kənˈsensəs-x2F-mechanism-x2F-ˈmekənɪzəm-x2F"><a href="#共识机制-consensus-x2F-kənˈsensəs-x2F-mechanism-x2F-ˈmekənɪzəm-x2F" class="headerlink" title="共识机制 consensus &#x2F;kənˈsensəs&#x2F; mechanism &#x2F;ˈmekənɪzəm&#x2F;"></a>共识机制 consensus &#x2F;<em>kənˈsensəs</em>&#x2F; mechanism &#x2F;<em>ˈmekənɪzəm</em>&#x2F;</h3><p>每添加一页的时候都要达成这两条共识：</p>
<ul>
<li>区块链添加区块时候都添加在最长的那条链的尾部</li>
<li>工作量证明机制（POW），第一位抢先证明了自己的工作能力的那个人才能添加这个区块</li>
</ul>
<h4 id="Difficult-amp-Nonse"><a href="#Difficult-amp-Nonse" class="headerlink" title="Difficult &amp; Nonse"></a>Difficult &amp; Nonse</h4><h4 id="比特币对矿工的两大激励作用："><a href="#比特币对矿工的两大激励作用：" class="headerlink" title="比特币对矿工的两大激励作用："></a>比特币对矿工的两大激励作用：</h4><p>如果矿工想要添加一个块，那么他就要算出满足这块的Nonse，这个Nonse满足的条件就是小于系统给出的值，第一个算出来的人将可以获得一个块的奖励（这个奖励从2009年开始一个快生产50个比特币，每隔4年，激励减少一半）。也就是说，这个奖励会随着时间的变化越来越少，预计到2140年发行完毕，这个时候中本聪 设计的第二个激励矿工的奖励：交易手续费。每当有人想要用比特币进行交易的时候，他都需要给矿工手续费，因为他需要矿工把他的交易放在那个区块中。也就是说，如果这个矿工算出了这个区块的Nonse还可以得到这个区块里面所有的手续费。 作为交易比特币的使用者，如果你的比特币，如果你的交易手续费给的多的话，那么矿工就会优先帮你放到区块中，如果给的少甚至不给的话，那么矿工就会不把你放在区块中。因为每个区块的容量是非常有限的，每10分钟只能记录容量为1MB的交易量，所以说矿工会把手续费高的交易放进去。</p>
<h3 id="账本隐私和快速对账"><a href="#账本隐私和快速对账" class="headerlink" title="账本隐私和快速对账"></a>账本隐私和快速对账</h3><p>比特币系统是通过密码学中的<strong>Hash算法（哈希值）</strong>来解决个人隐私和快速对账2个问题</p>
<ul>
<li>对交易信息进行加密，提取实物的特征。看到Hash结果是一串数字，没法反推；</li>
<li>通过比对hash值是否一致，就可以知道账本是否一致（对账）：如果前面交易信息不同，就会导致<strong>hash值（哈希值）</strong>不一致</li>
</ul>
<p><strong>账本一致性&#x2F;共识机制：</strong>用以下2种规则解决<strong>双花问题</strong>（同样一笔数字资产被重复支付，即同样一笔钱被花掉两次或多次）</p>
<p><strong>比特币系统的规则1：最长链为可信任的链条来保持一致性</strong></p>
<p><strong>比特币记录交易的原理</strong></p>
<p>系统内的计算机开始比赛，争取又快又准的算出这倒题目，比拼的是<strong>计算机算力</strong></p>
<p>胜出的计算机将拥有<strong>记账权成为矿工</strong>，矿工取得一定奖励（6.25比特币）</p>
<p>胜出的计算机将交易信息打造成新的区块，并将新的区块信息广播出去，使链增长. 每一个计算机都是分布式账本的结点。</p>
<p>如果有小D伪造账本，这个小D需要不停的成为之后拥有记账权的那个人、才能创造新的区块、并拉长另外一条分叉的链条，让小D伪造的链条成为最长的链条。但分叉的那条链是小D一个人去维护的，是拼不过全网中所有矿工一起创造的主链。</p>
<p><strong>比特币系统的规则2: 用POW获取记账权来保证账本的一致性</strong></p>
<p>工作量证明（Proof of Work, POW）</p>
<p>Nance: 会一直试的计算次数</p>
<p>寻找小于系统给定的目标值的Hash值：the way that users detect tampering in practice is through hashes, long strings of numbers that serve as proof of work. </p>
<p>最后找到符合条件的Hash值和Nance</p>
<p>所以算力越强的电脑，更容易拿到记账权，从而增加区块，拉长链条</p>
<p>Setting difficulty is accomplished by establishing a “target” for the hash: the lower the target, the smaller the set of valid hashes（是人为设计的一种运算方式，伪造账本只有在长时间保持算力优先才有可能伪造账本，但不可能）</p>
<p><strong>比特币的分叉</strong></p>
<p>比特币系统协议层面出现了分歧</p>
<ul>
<li>硬分叉（不可合并）：系统更新产生硬分叉，e.g. 比特币区块的扩容：旧比特币单秒交易笔数7笔（1MB对应的字节），但如果不同矿工使用不同版本的比特币系统进行挖矿，一些区块扩容而一些没有，旧矿工无法接受扩容后的区块，就形成分叉</li>
<li>软分叉（可合并）：如果短暂出现但最后可以并回主链，e.g. 篡改数据</li>
</ul>
<p><strong>总结</strong></p>
<p><strong>比特币不是一种货币，而是一种分布式账务系统。</strong>账本在每个参与者的电脑上备份，并且实时同步和对账；账本记录了一定数量的比特币交易的过程，每次记录下的交易过程和结果都会广播到网络，让所有节点都保持一致</p>
<p><strong>比特币系统采用了去中心化的方式。</strong>不是没有中心, 而是中心不停变化，每一次中心由节点竞争而得出记账权，记录交易打造成新的区块（每一笔交易中挖矿成功的矿工就是中心）</p>
<p><strong>区块链1.0技术</strong>（所有比特币中应用到的技术）：分布式数据存储，点对点传输，共识机制（POW），加密算法</p>
<h3 id="Ethereum-以太坊-representative"><a href="#Ethereum-以太坊-representative" class="headerlink" title="Ethereum 以太坊 (representative)"></a>Ethereum 以太坊 (representative)</h3><p>比特币的不足</p>
<ul>
<li>POW算法出块速度慢（10分钟），比特币矿场消耗大量电能</li>
<li>仅完成了货币的去中心化</li>
</ul>
<p><strong>以太坊的改进（V神发明）</strong></p>
<ul>
<li>出块速度提升（15秒）：以太坊区块链中将出块时间从10分钟提升到15秒</li>
<li>修改挖矿机制，POW+POS算法，逐步向POS算法过渡</li>
<li>智能合约：合同的去中心化，不仅限于货币的去中心化。公开透明无黑幕，违反规则，直接扣除保证金，不可停止</li>
</ul>
<p><strong>以太坊平台专业词汇</strong></p>
<p>MetaMask插件：第三方的虚拟钱包，方便买卖</p>
<p>账户地址：付款或收款的地址，类似银行卡号</p>
<p>以太币：基于以太坊的虚拟货币</p>
<p><strong>手续费（nickname：油费）</strong>: 查看智能合约不需要支付手续费，但是修改智能合约需要支付；付的手续费是以太币</p>
<ul>
<li>gas price：油单价</li>
<li>gas limit：油数量</li>
<li>计算公式：gas price x gas limit</li>
</ul>
<p>查看智能合约不需要支付手续费，但修改智能合约需要支付；为了屏蔽恶意攻击，要支付手续费（油费）；根据网络拥堵情况，决定手续费高低；</p>
<h3 id="智能合约-Smart-contract-Solidity-ifs-thens"><a href="#智能合约-Smart-contract-Solidity-ifs-thens" class="headerlink" title="智能合约 Smart contract (Solidity) ifs - thens"></a>智能合约 Smart contract (Solidity) ifs - thens</h3><p>Blockchains are also constantly evolving. One of the more recent developments is the creation of smart contracts.</p>
<ul>
<li><strong>Self Executing:</strong> Can be used to automatically exchange coins based on certain conditions.</li>
<li><strong>Uncompromisingly &#x2F;ʌnˈkɑːmprəmaɪzɪŋli&#x2F; Letter Strict</strong>: impersonal, 跑在以太坊系统中的代码合同，本质是一串代码。目前已经存在180w智能合约；</li>
<li><strong>Immutable:</strong> 智能合约适合表达规则明确且不轻易修改，不受人为主观因素影响；</li>
</ul>
<p><strong>以太坊中的Ghost协议（解决Centralization Bias）</strong>：尽快招安分叉区块&#x2F;分支链的尽快合并，以促成统一的区块链</p>
<blockquote>
<p>如果继续沿用比特币中的区块奖励方法，假如几乎在同时有多个矿工挖出了一个区块，此时网络中占据较大算力的矿池其算力巨大，而且通常地理位置优越，其网络与更多的节点相连，它发布的区块能跟更快的在网络中传播，因此在出现区块链分叉时，其所在的分叉更有可能成为主链。这种情况下，其他算力较低的矿池或者个体节点就不能得到出块奖励，在以太坊中经常发生区块链分叉的情况，但最后区块链的出块奖励大部分情况下都被大型矿池拿走，而算力小的节点通常很少拿到奖励，这种情况叫做“Centralization Bias”。 如果以太坊沿用比特币中的出块奖励方式，算力较小的矿池几乎拿不到出块奖励，这个看起来不太公平，长此以往，算力小的矿工挖出区块之后就不愿意合并到算力强的矿工挖出的区块链中，因为合并就意味着前面的劳动全部白费了，还不如不要合并，继续在自己挖出的区块上继续挖矿，说不定运气好能超过算力强的区块呢。很明显，这样下去不利于区块链出现分叉后快速合并，会影响到区块链的共识，基于上述原因，以太坊的设计中引入了Ghost协议。</p>
</blockquote>
<blockquote>
<p>————————————————</p>
</blockquote>
<blockquote>
<p>原文链接：<a target="_blank" rel="noopener" href="https://blog.csdn.net/t46414704152abc/article/details/81191804">https://blog.csdn.net/t46414704152abc/article/details/81191804</a></p>
</blockquote>
<p>以太坊规定每个区块最多包含2个对叔父区块的奖励，以招安分支链的区块，以太坊会给在每次主链矿工的下一代新区块产生时，分出2份奖励来招安，奖励2份7&#x2F;8的出块奖励（每次出块奖励是3个以太币）；同时，招安的主链上的区块，也可以得到2*（1&#x2F;32）的出块奖励；</p>
<p>每隔一代，区块奖励就会减少：最近的一代uncle区块，可以得到7&#x2F;8的出块奖励作为招安；再隔远一层的uncle区块，则是6&#x2F;8的出块奖励作为招安；间隔8代及以后的uncle区块，则不会得到任何出块奖励。uncle区块的后续分支链上不会得到任何奖励，以激励其尽快进行合并</p>
<p><strong>以太坊挖矿算法</strong></p>
<p><strong>POS（Proof of Stake，权益证明）算法</strong>，这种挖矿方式叫虚拟挖矿（virtual mining）</p>
<p>每一个区块的产出，比拼的不是矿工所有的货币，而是每次挖矿出的保证金。而且这部分保证金会被冻结，会在一定交易笔数之后被解冻，</p>
<p>目前以太坊用的是<strong>Casper协议，将POW算法和POS算法混合使用</strong>：</p>
<ul>
<li>POW算法来进行挖矿得出区块；</li>
<li>POS算法进行校验：引入了校验者Validator，投票选举区块是否可以称为主链上的区块。校验者必须投入一定数量的以太币作为保证金，投入保证金的多决定了投票的权重；成为校验者，不投票不作为，被举报，也会被没收保证金；每个校验者都有任期，任期结束后也有等待期，可能被检举，等待期后，下注正确的校验者可以收回原来的保证金和校验收益；</li>
</ul>
<p>POS算法和POW算法比较</p>
<ul>
<li>省掉挖矿过程，减少大量能源损耗；</li>
<li>通过闭环维护系统安全（POW算法可以通过砸钱买算力支配，转化为对比特币系统的攻击能力；POS算法，则有点类似于股东制公司，我先要成为成为公司的大股东，才能攻击这个公司）</li>
</ul>
<p><strong>以太坊的分叉</strong></p>
<p>硬分叉：分支链和主链无法合并</p>
<ul>
<li>比特币因为扩容</li>
<li>以太坊因为黑客攻击</li>
</ul>
<p>黑客攻击case study</p>
<p>The Dao智能合约：是一个众筹的项目，可以投资某个公司的项目成为投资人。这是最民主的投资，每次投资金额的支出，都需要所有投资人同意才能执行。合同规定有28天资金锁定时间；</p>
<p>The Dao智能合约允许成员成立子基金，黑客通过bug从其成立的子基金中转账盗取5000w美金到黑客子基金；</p>
<p>以太坊平台开发团队内部进行了讨论，最后决定要就这次错误进行干预；</p>
<ul>
<li>方案一：暴力分叉，约定好上面有黑客攻击的链是不合法的，从分叉链开始挖，但问题是影响到后续区块的合法性；</li>
<li>方案二：软分叉策略：通过发布升级的平台，让区块不包含the Dao地址的交易（区块中包含the DAO的交易，就认为是非法区块）。新矿工（升级了平台）挖出的区块不包含the Dao地址的交易，而能接在新矿工后面的老矿工是认可上一个区块的，所以也不包含the Dao交易。但当时除了一个bug，就没有收取所有包含the Dao交易的汽油费，结果导致非法交易没法挖矿。</li>
<li>方案三：硬分叉策略：再一次发布软件升级，让更新了软件后所有the Dao智能合约的人都被强制转移到退款的智能合约，当主链上挖到第192w个区块时，自动会转走the Dao中的黑客基金。因此，所有更新了软件升级的新矿工是有资格跟在第192w个区块之后的（相当于是erase掉黑客交易），这条主链是ETH。但没有更新软件的矿工，其合约不同意第192w个区块进行的转账，所以是无法接在这个非法的第192w个区块后的，因此会在第192w个区块前一个接口发生分叉，叫ETC classic。因此ETH和ETC产生了永久的分叉；</li>
</ul>
<p><strong>以太坊总结</strong></p>
<ol>
<li>缩短出块时间</li>
<li>Ghost协议：本质是重金收买分支的策略，防止centralizationi bias</li>
<li>Casper协议：POS和POW协议的混合体，让校验者保证金的额占比，换算成票数，然后投票选举；</li>
<li>增加智能合约</li>
<li>硬分叉</li>
</ol>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/Web3-0/" class="category-chain-item">Web3.0</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/Web3-0/" class="print-no-link">#Web3.0</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>Blockchain</div>
      <div>http://example.com/2023/06/26/Blockchain/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>Author</div>
          <div>Rocky CHEN</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>Posted on</div>
          <div>June 26, 2023</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>Licensed under</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - Attribution">
                    <i class="iconfont icon-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2023/07/01/travel3/" title="香港散步攻略 | Hong Kong strolling Guide">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">香港散步攻略 | Hong Kong strolling Guide</span>
                        <span class="visible-mobile">Previous</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2023/06/26/ProjectsDescription/" title="All My Projects Description">
                        <span class="hidden-mobile">All My Projects Description</span>
                        <span class="visible-mobile">Next</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
  
  
    <article id="comments" lazyload>
      
  <div class="disqus" style="width:100%">
    <div id="disqus_thread"></div>
    
      <script>
        Fluid.utils.loadComments('#disqus_thread', function() {
          Fluid.utils.createCssLink('https://lib.baomitu.com/disqusjs/1.3.0/disqusjs.css');
          Fluid.utils.createScript('https://lib.baomitu.com/disqusjs/1.3.0/disqus.js', function() {
            new DisqusJS({
              shortname: 'fluid',
              apikey: ''
            });
          });
        });
      </script>
    
    <noscript>Please enable JavaScript to view the comments</noscript>
  </div>


    </article>
  


          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>Table of Contents</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  



  <script>
  Fluid.utils.createScript('https://lib.baomitu.com/mermaid/8.14.0/mermaid.min.js', function() {
    mermaid.initialize({"theme":"default"});

    Fluid.utils.listenDOMLoaded(function() {
      Fluid.events.registerRefreshCallback(function() {
        if ('mermaid' in window) {
          mermaid.init();
        }
      });
    });
  });
</script>






    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Search</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">Keyword</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="http://ziyangchen.com/" target="_blank" rel="nofollow noopener"><span>Copyright © 2020-2023</span></a> <i class="iconfont icon-love"></i> <a href="http://ziyangchen.com/" target="_blank" rel="nofollow noopener"><span>Rocky CHEN</span></a> 
    </div>
  
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>

  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">Blog works best with JavaScript enabled</div>
  </noscript>
</body>
</html>
